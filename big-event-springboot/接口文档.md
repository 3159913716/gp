# 大事件项目接口文档

## 文档说明

**因各后端接口的响应情况不一致**

**所以预期成功响应以及失败响应以实际响应结果为准**

**所有接口前路径实际为准**

## 目录结构

- [1. 用户相关接口](#1-用户相关接口)
- [2. 文章相关接口](#2-文章相关接口)
- [3. 文章评论相关接口](#3-文章评论相关接口)
- [4. 评论点赞相关接口](#4-评论点赞相关接口)
- [5. 分类相关接口](#5-分类相关接口)
- [6. 管理员相关接口](#6-管理员相关接口)
- [7. 文件上传相关接口](#7-文件上传相关接口)
- [8. 搜索相关接口](#8-搜索相关接口)
- [9. 邮箱相关接口](#9-邮箱相关接口)

## 1. 用户相关接口

### 1.1 用户注册接口

- **接口名称**：用户注册
- **接口URL**：`/user/register`
- **请求方法**：POST
- **接口描述**：注册新用户账号
- **权限要求**：无

#### 请求参数说明

- **请求参数**：
  - `username`: String, 用户名（5-16位非空字符）
  - `password`: String, 密码（5-16位非空字符）

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "用户名已被占用！",
  "data": null
}
```

#### 业务逻辑描述
检查用户名是否已存在，不存在则创建新用户并返回成功，存在则返回错误信息。

### 1.2 用户登录接口

- **接口名称**：用户登录
- **接口URL**：`/user/login`
- **请求方法**：POST
- **接口描述**：用户登录认证并获取JWT令牌
- **权限要求**：无

#### 请求参数说明

- **请求参数**：
  - `username`: String, 用户名（5-16位非空字符）
  - `password`: String, 密码（5-16位非空字符）

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "用户名或密码错误！",
  "data": null
}
```

#### 业务逻辑描述
验证用户名和密码，成功后更新最后登录时间，生成JWT令牌并存储到Redis中，返回令牌。

### 1.3 获取用户信息接口

- **接口名称**：获取用户详细信息
- **接口URL**：`/user/userInfo`
- **请求方法**：GET
- **接口描述**：获取当前登录用户的详细信息
- **权限要求**：需要登录（携带有效的JWT令牌）

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "id": 1,
    "username": "testuser",
    "nickname": "测试用户",
    "email": "test@example.com",
    "avatar": "http://example.com/avatar.jpg",
    "role": 1,
    "status": 0
  }
}
```

#### 业务逻辑描述
从JWT令牌中获取用户名，查询并返回用户信息。

### 1.4 更新用户信息接口

- **接口名称**：更新用户信息
- **接口URL**：`/user/update`
- **请求方法**：PUT
- **接口描述**：更新当前用户的个人信息
- **权限要求**：需要登录

#### 请求参数说明

| 参数名   | 参数类型 | 是否必传 | 描述     |
| -------- | -------- | -------- | -------- |
| id       | number   | 是       | 用户 ID  |
| username | text     | 是       | 用户名   |
| nickname | text     | 是       | 用户昵称 |
| email    | text     | 是       | 用户邮箱 |

- **请求头**：
  - `Authorization`: String, JWT令牌
- **请求体（JSON格式）**：
  ```json
  {
      "id":"3",
      "username":"wangbadan",
      "nickname":"222",
      "email":"sb@itcast.cn"
  }
  ```

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```

#### 业务逻辑描述
验证并更新用户的昵称和邮箱信息。

### 1.5 更新用户头像接口

- **接口名称**：更新用户头像
- **接口URL**：`/user/updateAvatar`
- **请求方法**：PATCH
- **接口描述**：更新当前用户的头像
- **权限要求**：需要登录

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌
- **请求参数**：
  - `avatarUrl`: String, 头像URL（必须是有效的URL格式）

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```

#### 业务逻辑描述
验证头像URL格式，更新用户头像信息。

### 1.6 修改密码接口

- **接口名称**：修改密码
- **接口URL**：`/user/updatePwd`
- **请求方法**：PATCH
- **接口描述**：修改当前用户的密码
- **权限要求**：需要登录

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌
- **请求体（JSON格式）**：
  ```json
  {
    "old_pwd": "旧密码",
    "new_pwd": "新密码",
    "re_pwd": "确认新密码"
  }
  ```

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "原密码不正确!",
  "data": null
}
```

#### 业务逻辑描述
验证原密码正确性，检查新密码一致性，更新密码并删除旧的JWT令牌。

### 1.7 获取我的收藏列表接口

- **接口名称**：获取我的收藏列表
- **接口URL**：`/user/collections`
- **请求方法**：GET
- **接口描述**：获取当前用户的文章收藏列表
- **权限要求**：需要登录

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌
- **请求参数**：
  - `page`: Integer, 当前页码（默认1）
  - `pageSize`: Integer, 每页条数（默认10）

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "list": [
      {
        "id": 1,
        "title": "文章标题",
        "content": "文章内容摘要",
        "createTime": "2023-01-01 12:00:00",
        "collectTime": "2023-01-02 12:00:00"
      }
    ],
    "total": 10,
    "page": 1,
    "pageSize": 10
  }
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "获取收藏列表失败",
  "data": null
}
```

#### 业务逻辑描述
根据当前用户ID查询收藏的文章列表，支持分页查询。

### 1.8 关注/取消关注用户接口

- **接口名称**：关注/取消关注用户
- **接口URL**：`/user/{id}/follow`
- **请求方法**：POST
- **接口描述**：关注或取消关注指定用户
- **权限要求**：需要登录

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌
- **路径参数**：
  - `id`: Integer, 被关注用户的ID

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "isFollowing": true,
    "followCount": 100
  }
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "关注失败，用户不存在",
  "data": null
}
```

#### 业务逻辑描述
根据当前用户ID和目标用户ID执行关注或取消关注操作，返回操作结果。

### 1.9 获取我的关注列表接口

- **接口名称**：获取我的关注列表
- **接口URL**：`/user/following`
- **请求方法**：GET
- **接口描述**：获取当前用户关注的用户列表
- **权限要求**：需要登录

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": [
    {
      "id": 1,
      "username": "user1",
      "nickname": "用户1",
      "avatar": "http://example.com/avatar1.jpg",
      "followTime": "2023-01-01 12:00:00"
    }
  ]
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "获取关注列表失败",
  "data": null
}
```

#### 业务逻辑描述
根据当前用户ID查询其关注的用户列表。

### 1.10 获取我的粉丝列表接口

- **接口名称**：获取我的粉丝列表
- **接口URL**：`/user/followers`
- **请求方法**：GET
- **接口描述**：获取当前用户的粉丝列表
- **权限要求**：需要登录

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": [
    {
      "id": 1,
      "username": "follower1",
      "nickname": "粉丝1",
      "avatar": "http://example.com/avatar1.jpg",
      "followTime": "2023-01-01 12:00:00"
    }
  ]
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "获取粉丝列表失败",
  "data": null
}
```

#### 业务逻辑描述
根据当前用户ID查询其粉丝列表。

### 1.11 提交作者申请接口

- **接口名称**：提交作者申请
- **接口URL**：`/user/author-apply`
- **请求方法**：POST
- **接口描述**：提交作者身份申请
- **权限要求**：需要登录

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌
- **请求体（JSON格式）**：
  ```json
  {
    "realName": "真实姓名",
    "idCard": "身份证号",
    "phone": "联系电话",
    "email": "联系邮箱"
  }
  ```

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "申请提交成功，请等待审核",
  "data": null
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "处理失败",
  "data": null
}
```

#### 业务逻辑描述
验证并提交用户的作者申请，设置申请人ID，保存到数据库。

### 1.12 获取作者申请状态接口

- **接口名称**：获取作者申请状态
- **接口URL**：`/user/author-apply/status`
- **请求方法**：GET
- **接口描述**：获取当前用户的作者申请状态
- **权限要求**：需要登录

### 1.13 根据邮箱查找用户接口

- **接口名称**：根据邮箱查找用户
- **接口URL**：`/user/find-by-email`
- **请求方法**：POST
- **接口描述**：验证邮箱是否存在对应的用户，用于忘记密码流程的第一步
- **权限要求**：无

#### 请求参数说明

- **请求体（JSON格式）**：
  ```json
  {
    "email": "test@example.com"
  }
  ```

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": "邮箱已注册"
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "邮箱格式错误",
  "data": null
}
```

```json
{
  "code": 0,
  "msg": "邮箱未注册",
  "data": null
}
```

#### 业务逻辑描述
验证邮箱格式，检查邮箱是否对应已注册用户，返回验证结果。

### 1.14 发送忘记密码验证码接口

- **接口名称**：发送忘记密码验证码
- **接口URL**：`/user/send-forget-code`
- **请求方法**：POST
- **接口描述**：向指定邮箱发送用于重置密码的验证码
- **权限要求**：无

#### 请求参数说明

- **请求体（JSON格式）**：
  ```json
  {
    "email": "test@example.com"
  }
  ```

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "验证码发送成功",
  "data": null
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "邮箱格式错误",
  "data": null
}
```

```json
{
  "code": 0,
  "msg": "邮箱未注册",
  "data": null
}
```

```json
{
  "code": 0,
  "msg": "验证码发送失败，请稍后重试",
  "data": null
}
```

#### 业务逻辑描述
验证邮箱格式，检查邮箱是否对应已注册用户，调用邮件服务发送验证码到指定邮箱。

### 1.15 重置密码接口

- **接口名称**：重置密码
- **接口URL**：`/user/reset-pwd`
- **请求方法**：POST
- **接口描述**：使用邮箱验证码重置用户密码
- **权限要求**：无

#### 请求参数说明

- **请求体（JSON格式）**：
  ```json
  {
    "email": "test@example.com",
    "code": "123456",
    "newPwd": "newpassword",
    "rePwd": "newpassword"
  }
  ```

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "密码重置成功",
  "data": null
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "邮箱格式错误",
  "data": null
}
```

```json
{
  "code": 0,
  "msg": "邮箱未注册",
  "data": null
}
```

```json
{
  "code": 0,
  "msg": "验证码错误或已过期",
  "data": null
}
```

```json
{
  "code": 0,
  "msg": "两次输入的密码不一致",
  "data": null
}
```

```json
{
  "code": 0,
  "msg": "密码长度必须在5-16位之间",
  "data": null
}
```

#### 业务逻辑描述
验证邮箱格式、验证码有效性、密码一致性和长度要求，验证通过后更新用户密码。

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "id": 1,
    "userId": 2,
    "realName": "真实姓名",
    "idCard": "身份证号",
    "status": 0,
    "applyTime": "2023-01-01 12:00:00",
    "auditTime": null,
    "rejectReason": null
  }
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "获取申请状态失败",
  "data": null
}
```

#### 业务逻辑描述
根据当前用户ID查询其作者申请状态。

### 1.13 获取我的文章列表接口

- **接口名称**：获取我的文章列表
- **接口URL**：`/user/articles`
- **请求方法**：GET
- **接口描述**：获取当前作者的文章列表
- **权限要求**：需要登录且具有作者权限（role=1）

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌
- **请求参数**：
  - `page`: Integer, 当前页码（默认1，小于1时自动设为1）
  - `pageSize`: Integer, 每页大小（默认10，小于1时自动设为10，大于50时自动设为50）
  - `state`: String, 文章状态（可选，有效值：草稿, 已发布）

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "list": [
      {
        "id": 1,
        "title": "文章标题",
        "content": "文章内容",
        "categoryId": 1,
        "state": "已发布",
        "createTime": "2023-01-01 12:00:00",
        "updateTime": "2023-01-01 12:00:00"
      }
    ],
    "total": 10,
    "page": 1,
    "pageSize": 10
  }
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "需要作者权限",
  "data": null
}
```

```json
{
  "code": 0,
  "msg": "状态参数错误，可选值：草稿, 已发布",
  "data": null
}
```

#### 业务逻辑描述
验证作者权限，对页码和页大小进行容错处理，验证状态参数有效性，查询并返回用户文章列表。

## 2. 文章相关接口

### 2.1 添加文章接口

- **接口名称**：添加文章
- **接口URL**：`/article`
- **请求方法**：POST
- **接口描述**：创建新文章
- **权限要求**：需要登录且具有作者权限

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌
- **请求体（JSON格式）**：
  ```json
  {
    "title": "文章标题",
    "content": "文章内容",
    "categoryId": 1,
    "state": "已发布"
  }
  ```

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```

#### 业务逻辑描述
验证并创建新文章，关联到当前登录用户。

### 2.2 获取文章列表接口

- **接口名称**：获取文章列表
- **接口URL**：`/article`
- **请求方法**：GET
- **接口描述**：获取文章列表，支持分页和筛选
- **权限要求**：无

#### 请求参数说明

- **请求参数**：
  - `pageNum`: Integer, 当前页码
  - `pageSize`: Integer, 每页条数
  - `categoryId`: Integer, 分类ID（可选）
  - `state`: String, 文章状态（可选）

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "items": [
      {
        "id": 1,
        "title": "文章标题",
        "content": "文章内容",
        "categoryId": 1,
        "state": "已发布",
        "createTime": "2023-01-01 12:00:00"
      }
    ],
    "total": 100
  }
}
```

#### 业务逻辑描述
根据参数查询文章列表，支持按分类和状态筛选。

### 2.3 获取文章详情接口

- **接口名称**：获取文章详情
- **接口URL**：`/article/detail`
- **请求方法**：GET
- **接口描述**：获取指定文章的详细信息
- **权限要求**：无

#### 请求参数说明

- **请求参数**：
  - `id`: Integer, 文章ID

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "id": 1,
    "title": "文章标题",
    "content": "文章内容",
    "categoryId": 1,
    "state": "已发布",
    "createTime": "2023-01-01 12:00:00",
    "updateTime": "2023-01-01 12:00:00"
  }
}
```

#### 业务逻辑描述
根据文章ID查询文章详情。

### 2.4 更新文章接口

- **接口名称**：更新文章
- **接口URL**：`/article`
- **请求方法**：PUT
- **接口描述**：更新文章信息
- **权限要求**：需要登录且具有作者权限

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌
- **请求体（JSON格式）**：
  ```json
  {
    "id": 1,
    "title": "新标题",
    "content": "新内容",
    "categoryId": 1,
    "state": "已发布"
  }
  ```

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```

#### 业务逻辑描述
验证并更新文章信息。

### 2.5 删除文章接口

- **接口名称**：删除文章
- **接口URL**：`/article`
- **请求方法**：DELETE
- **接口描述**：删除指定文章
- **权限要求**：需要登录且具有作者权限

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌
- **请求参数**：
  - `id`: Integer, 文章ID

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```

#### 业务逻辑描述
根据文章ID删除文章。

### 2.6 获取首页文章列表接口

- **接口名称**：获取首页文章列表
- **接口URL**：`/article/home`
- **请求方法**：GET
- **接口描述**：获取首页文章列表，支持分页和排序
- **权限要求**：无

#### 请求参数说明

- **请求参数**：
  - `page`: Integer, 当前页码（默认1）
  - `pageSize`: Integer, 每页条数（默认10）
  - `sort`: String, 排序方式（默认"new"，按时间倒序）

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "items": [
      {
        "id": 1,
        "title": "文章标题",
        "content": "文章内容摘要",
        "author": {
          "id": 1,
          "username": "author1",
          "avatar": "http://example.com/avatar.jpg"
        },
        "categoryName": "技术",
        "likeCount": 100,
        "commentCount": 50,
        "viewCount": 1000,
        "createTime": "2023-01-01 12:00:00"
      }
    ],
    "total": 100
  }
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "获取文章列表失败",
  "data": null
}
```

#### 业务逻辑描述
根据分页参数和排序方式获取首页文章列表，包含作者信息和统计数据。

### 2.7 点赞/取消点赞文章接口

- **接口名称**：点赞/取消点赞文章
- **接口URL**：`/article/like/{id}`
- **请求方法**：GET
- **接口描述**：获取该文章的具体内容
- **权限要求**：公开

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌
- **请求参数**：
  - `id`: Integer, 文章ID

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "成功",
  "data": {
    "id": 1,
    "title": "文章标题",
    "content": "文章内容",
    "coverImg": "封面图片URL",
    "state": "已发布",
    "categoryId": 1,
    "author": "作者信息",
    "createTime": "2023-01-01 12:00:00",
    "updateTime": "2023-01-01 12:00:00",
    "likeCount": 10,
    "collectCount": 5,
    "commentCount": 3,
    "liked": false,
    "collected": false
  }
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 500,
  "msg": "获取文章详情失败，请稍后重试",
  "data": null
}
```

#### 业务逻辑描述
根据当前用户ID和文章ID执行点赞或取消点赞操作，返回操作结果和最新点赞数。

### 2.8 收藏/取消收藏文章接口

- **接口名称**：收藏/取消收藏文章
- **接口URL**：`/article/collect/{id}`
- **请求方法**：POST
- **接口描述**：收藏或取消收藏文章
- **权限要求**：需要登录

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌
- **路径参数**：
  - `id`: Integer, 文章ID

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "isCollected": true,
    "collectCount": 51
  }
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "收藏操作失败",
  "data": null
}
```

#### 业务逻辑描述
根据当前用户ID和文章ID执行收藏或取消收藏操作，返回操作结果和最新收藏数。

### 2.9 获取文章详情页接口

- **接口名称**：获取文章详情页
- **接口URL**：`/article/detail-page`
- **请求方法**：POST
- **接口描述**：收藏或取消收藏文章
- **权限要求**：需要登录

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌(可选)
- **路径参数**：
  - `id`: Integer, 文章ID

#### 响应数据说明

##### 预期成功响应（JSON格式）：

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "isCollected": true,
    "collectCount": 51
  }
}
```

##### 预期失败响应（JSON格式）：

```json
{
  "code": 0,
  "msg": "收藏操作失败",
  "data": null
}
```

#### 业务逻辑描述

根据当前文章ID执行文章查询操作，返回文章具体内容和该用户是否收场/点赞该篇文章(如果用户已登录的话)

## 3. 文章评论相关接口

### 3.1 发布评论接口

- **接口名称**：发布评论
- **接口URL**：`/article/{id}/comment`
- **请求方法**：POST
- **接口描述**：对指定文章发布评论
- **权限要求**：需要登录

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌
- **路径参数**：
  - `id`: Integer, 文章ID
- **请求体（JSON格式）**：
  ```json
  {
    "content": "评论内容",
    "parentId": null
  }
  ```

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "id": 1,
    "content": "评论内容",
    "createTime": "2023-01-01 12:00:00",
    "user": {
      "id": 1,
      "username": "user1",
      "avatar": "http://example.com/avatar.jpg"
    },
    "likeCount": 0
  }
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "评论内容不能为空，请输入您的评论",
  "data": null
}
```

#### 业务逻辑描述
验证评论内容，关联当前用户和文章ID，发布评论并返回评论信息。

### 3.2 获取文章评论列表接口

- **接口名称**：获取文章评论列表
- **接口URL**：`/article/{id}/comments`
- **请求方法**：GET
- **接口描述**：获取指定文章的评论列表
- **权限要求**：无（用户未登录时返回基本信息）

#### 请求参数说明

- **路径参数**：
  - `id`: Integer, 文章ID
- **请求参数**：
  - `page`: Integer, 当前页码（默认1）
  - `pageSize`: Integer, 每页条数（默认10）

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "list": [
      {
        "id": 1,
        "content": "评论内容",
        "createTime": "2023-01-01 12:00:00",
        "user": {
          "id": 1,
          "username": "user1",
          "avatar": "http://example.com/avatar.jpg"
        },
        "likeCount": 10,
        "isLiked": true,
        "replies": []
      }
    ],
    "total": 50
  }
}
```

#### 业务逻辑描述
根据文章ID获取评论列表，支持分页，如果用户已登录还会返回点赞状态。

## 4. 评论点赞相关接口

### 4.1 点赞/取消点赞评论接口

- **接口名称**：点赞/取消点赞评论
- **接口URL**：`/comment/{id}/like`
- **请求方法**：POST
- **接口描述**：对指定评论进行点赞或取消点赞
- **权限要求**：需要登录

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌
- **路径参数**：
  - `id`: Integer, 评论ID

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "isLiked": true,
    "likeCount": 11
  }
}
```

#### 业务逻辑描述
根据当前用户ID和评论ID执行点赞或取消点赞操作，返回操作结果和最新点赞数。

## 5. 分类相关接口

### 5.1 添加分类接口

- **接口名称**：添加分类
- **接口URL**：`/category`
- **请求方法**：POST
- **接口描述**：创建新的文章分类
- **权限要求**：需要登录且具有作者权限

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌
- **请求体（JSON格式）**：
  
  ```json
  {
    "categoryName": "分类名称",
    "categoryAlias": "分类别名"
  }
  ```

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```

#### 业务逻辑描述
验证并创建新的文章分类。

### 5.2 获取分类列表接口

- **接口名称**：获取分类列表
- **接口URL**：`/category`
- **请求方法**：GET
- **接口描述**：获取所有文章分类列表
- **权限要求**：无

#### 请求参数说明

无

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": [
    {
      "id": 1,
      "categoryName": "技术",
      "categoryAlias": "tech",
      "createTime": "2023-01-01 12:00:00",
      "updateTime": "2023-01-01 12:00:00"
    }
  ]
}
```

#### 业务逻辑描述
查询并返回所有文章分类列表。

### 5.3 获取分类详情接口

- **接口名称**：获取分类详情
- **接口URL**：`/category/detail`
- **请求方法**：GET
- **接口描述**：获取指定分类的详细信息
- **权限要求**：无

#### 请求参数说明

- **请求参数**：
  - `id`: Integer, 分类ID

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "id": 1,
    "categoryName": "技术",
    "categoryAlias": "tech",
    "createTime": "2023-01-01 12:00:00",
    "updateTime": "2023-01-01 12:00:00"
  }
}
```

#### 业务逻辑描述
根据分类ID查询分类详情。

### 5.4 更新分类接口

- **接口名称**：更新分类
- **接口URL**：`/category`
- **请求方法**：PUT
- **接口描述**：更新分类信息
- **权限要求**：需要登录且具有作者权限

#### 请求参数说明

- **请求头**：
  
  - `Authorization`: String, JWT令牌
- **请求体（JSON格式）**：
  ```json
  {
    "id": 1,
    "categoryName": "新分类名称",
    "categoryAlias": "新分类别名"
  }
  ```

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```

#### 业务逻辑描述
验证并更新分类信息。

### 5.5 删除分类接口

- **接口名称**：删除分类
- **接口URL**：`/category`
- **请求方法**：DELETE
- **接口描述**：删除指定分类
- **权限要求**：需要登录且具有作者权限

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌
- **请求参数**：
  - `id`: Integer, 分类ID

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```

#### 业务逻辑描述
根据分类ID删除分类。

## 6. 管理员相关接口

### 6.1 审核作者申请接口

- **接口名称**：审核作者申请
- **接口URL**：`/admin/author-applies/{id}/audit`
- **请求方法**：PUT
- **接口描述**：审核用户的作者申请
- **权限要求**：需要登录且具有管理员权限（role=0）

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌
- **路径参数**：
  - `id`: Integer, 申请ID
- **请求体（JSON格式）**：
  ```json
  {
    "status": 1,
    "rejectReason": "拒绝原因（仅当status=2时必填）"
  }
  ```

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "申请已通过",
  "data": null
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "审核状态无效，请传入1(通过)或2(拒绝)",
  "data": null
}
```

#### 业务逻辑描述
验证管理员权限，根据审核状态处理作者申请，记录操作日志。

### 6.2 修改用户角色接口

- **接口名称**：修改用户角色
- **接口URL**：`/admin/users/{id}/role`
- **请求方法**：PUT
- **接口描述**：修改指定用户的角色
- **权限要求**：需要登录且具有管理员权限（role=0）

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌
- **路径参数**：
  - `id`: Integer, 用户ID
- **请求体（JSON格式）**：
  ```json
  {
    "role": 1
  }
  ```

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "用户角色修改成功",
  "data": null
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "管理员不能修改自身角色",
  "data": null
}
```

#### 业务逻辑描述
验证管理员权限，检查是否修改自身角色，更新用户角色并记录操作日志。

### 6.3 获取作者申请列表接口

- **接口名称**：获取作者申请列表
- **接口URL**：`/admin/author-applies`
- **请求方法**：GET
- **接口描述**：获取所有作者申请列表，支持分页和状态筛选
- **权限要求**：需要登录且具有管理员权限（role=0）

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌
- **请求参数**：
  - `page`: Integer, 当前页码（默认1）
  - `pageSize`: Integer, 每页大小（默认10）
  - `status`: Integer, 申请状态（0=待审核/1=通过/2=拒绝，可选）

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "list": [
      {
        "id": 1,
        "userId": 2,
        "username": "user2",
        "realName": "真实姓名",
        "status": 0,
        "applyTime": "2023-01-01 12:00:00",
        "auditTime": null,
        "rejectReason": null
      }
    ],
    "total": 50,
    "page": 1,
    "pageSize": 10
  }
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "没有权限执行此操作",
  "data": null
}
```

#### 业务逻辑描述
验证管理员权限，查询并返回作者申请列表。

### 6.4 获取用户列表接口

- **接口名称**：获取用户列表
- **接口URL**：`/admin/users`
- **请求方法**：GET
- **接口描述**：获取所有用户列表，支持分页和筛选
- **权限要求**：需要登录且具有管理员权限（role=0）

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌
- **请求参数**：
  - `page`: Integer, 当前页码（默认1）
  - `pageSize`: Integer, 每页大小（默认10）
  - `role`: Integer, 用户角色（可选）
  - `username`: String, 用户名搜索（可选）
  - `status`: Integer, 用户状态（可选）

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "list": [
      {
        "id": 1,
        "username": "user1",
        "nickname": "用户1",
        "email": "user1@example.com",
        "avatar": "http://example.com/avatar1.jpg",
        "role": 1,
        "status": 0,
        "createTime": "2023-01-01 12:00:00"
      }
    ],
    "total": 100,
    "page": 1,
    "pageSize": 10
  }
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "没有权限执行此操作",
  "data": null
}
```

#### 业务逻辑描述
验证管理员权限，根据条件查询用户列表，排除当前管理员自己。

### 6.5 获取数据统计接口

- **接口名称**：获取数据统计
- **接口URL**：`/admin/statistics`
- **请求方法**：GET
- **接口描述**：获取系统数据统计信息
- **权限要求**：需要登录且具有管理员权限（role=0）

### 6.6 封禁用户接口

- **接口名称**：封禁用户
- **接口URL**：`/admin/users/{id}/ban`
- **请求方法**：PUT
- **接口描述**：封禁指定用户，使其无法登录系统
- **权限要求**：需要登录且具有管理员权限（role=0）

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌
- **路径参数**：
  - `id`: Integer, 用户ID

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "用户不存在",
  "data": null
}
```

```json
{
  "code": 0,
  "msg": "用户已被封禁",
  "data": null
}
```

```json
{
  "code": 0,
  "msg": "管理员不能封禁自己",
  "data": null
}
```

#### 业务逻辑描述
验证管理员权限，检查用户是否存在，检查是否尝试封禁自己，检查用户是否已被封禁，更新用户状态为封禁状态。

### 6.7 解除封禁用户接口

- **接口名称**：解除封禁用户
- **接口URL**：`/admin/users/{id}/unban`
- **请求方法**：PUT
- **接口描述**：解除对指定用户的封禁，恢复其登录权限
- **权限要求**：需要登录且具有管理员权限（role=0）

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌
- **路径参数**：
  - `id`: Integer, 用户ID

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "用户不存在",
  "data": null
}
```

```json
{
  "code": 0,
  "msg": "用户未被封禁",
  "data": null
}
```

#### 业务逻辑描述
验证管理员权限，检查用户是否存在，检查用户是否被封禁，更新用户状态为正常状态。

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "totalUsers": 1000,
    "totalArticles": 5000,
    "totalComments": 10000,
    "todayNewUsers": 50,
    "todayNewArticles": 200,
    "todayNewComments": 500
  }
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "没有权限访问统计数据",
  "data": null
}
```

#### 业务逻辑描述
验证管理员权限，获取并返回系统数据统计信息。

## 7. 文件上传相关接口

### 7.1 文件上传接口

- **接口名称**：文件上传
- **接口URL**：`/upload`
- **请求方法**：POST
- **接口描述**：上传文件到阿里云OSS
- **权限要求**：需要登录

#### 请求参数说明

- **请求头**：
  - `Authorization`: String, JWT令牌
- **请求体（multipart/form-data）**：
  - `file`: File, 要上传的文件

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": "https://example.oss-cn-beijing.aliyuncs.com/20230101/abcdef123456.jpg"
}
```

#### 业务逻辑描述
处理文件上传请求，生成唯一文件名，上传到阿里云OSS，返回文件URL。

## 8. 搜索相关接口

### 8.1 搜索文章接口

- **接口名称**：搜索文章
- **接口URL**：`/search`
- **请求方法**：GET
- **接口描述**：根据关键词搜索文章
- **权限要求**：无

#### 请求参数说明

- **请求参数**：
  - `keyword`: String, 搜索关键词（必填）
  - `page`: Integer, 当前页码（默认1）
  - `pageSize`: Integer, 每页条数（默认10）

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "list": [
      {
        "id": 1,
        "title": "文章标题",
        "content": "文章内容摘要",
        "author": {
          "id": 1,
          "username": "author1",
          "avatar": "http://example.com/avatar.jpg"
        },
        "categoryName": "技术",
        "likeCount": 100,
        "commentCount": 50,
        "viewCount": 1000,
        "createTime": "2023-01-01 12:00:00"
      }
    ],
    "total": 50,
    "keyword": "搜索关键词"
  }
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "code": 0,
  "msg": "搜索关键词不能为空",
  "data": null
}
```

#### 业务逻辑描述
验证搜索关键词，调用服务层进行文章搜索，返回搜索结果。

## 9. 邮箱相关接口

### 9.1 发送验证码接口

- **接口名称**：发送验证码
- **接口URL**：`/api/email/send-code`
- **请求方法**：POST
- **接口描述**：向指定邮箱发送验证码
- **权限要求**：无

#### 请求参数说明

- **请求参数**：
  - `email`: String, 邮箱地址
  - `type`: String, 验证码类型（register或forget）

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "success": true,
  "message": "验证码发送成功",
  "data": null
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "success": false,
  "message": "验证码发送失败，请稍后重试",
  "data": null
}
```

#### 业务逻辑描述
验证邮箱格式和类型参数，发送验证码到指定邮箱。

### 9.2 验证验证码接口

- **接口名称**：验证验证码
- **接口URL**：`/api/email/verify`
- **请求方法**：POST
- **接口描述**：验证邮箱验证码是否有效
- **权限要求**：无

#### 请求参数说明

- **请求参数**：
  - `email`: String, 邮箱地址
  - `code`: String, 验证码（6位数字）
  - `type`: String, 验证码类型（register或forget）

#### 响应数据说明

##### 预期成功响应（JSON格式）：
```json
{
  "success": true,
  "message": "验证成功",
  "data": null
}
```

##### 预期失败响应（JSON格式）：
```json
{
  "success": false,
  "message": "验证码错误或已过期",
  "data": null
}
```

#### 业务逻辑描述
验证参数格式，检查验证码是否正确且在有效期内。

### 9.3 邮箱验证码重置密码服务

- **服务说明**：提供忘记密码功能的验证码服务
- **支持功能**：
  1. 邮箱用户验证
  2. 发送忘记密码专用验证码
  3. 验证码有效期验证
  4. 重置密码授权

#### 相关接口
- 邮箱用户验证：`/user/find-by-email`
- 发送验证码：`/user/send-forget-code`
- 密码重置：`/user/reset-pwd`

#### 业务流程
1. 用户通过邮箱查询验证账户存在性
2. 系统向用户邮箱发送验证码
3. 用户输入验证码和新密码
4. 系统验证验证码有效性并更新密码

#### 安全特性
- 验证码有效期限制（通常为5-10分钟）
- 密码加密存储
- 参数格式严格验证
- 防重复操作限制